# API Documentation Automation

This documentation is automatically generated from your OpenAPI specification using [Mintlify](https://mintlify.com/). The setup follows the approach outlined in [this DEV.to article](https://dev.to/onwuemene/integrating-openapi-with-mintlify-204g).

## How It Works

1. **OpenAPI Specification**: Your `api-reference/openapi.json` file is automatically converted from Swagger 2.0 to OpenAPI 3.0 format
2. **Auto-Generation**: Mintlify's scraper generates individual MDX files for each API endpoint
3. **Organized Structure**: Endpoints are automatically organized by resource type (Lists, Objects, Records)
4. **Sync with Codebase**: Since your OpenAPI spec is generated from your codebase, documentation stays in sync automatically

## Manual Updates

### Update Documentation from OpenAPI Spec

```bash
# Run the automation script
npm run update-api-docs

# Or run the script directly
./scripts/update-api-docs.sh
```

### Validate OpenAPI Specification

```bash
npm run validate-openapi
```

### Preview Documentation Locally

```bash
npm run dev
```

## Automatic Updates

The documentation will automatically update via GitHub Actions when:

- You push changes to `api-reference/openapi.json`
- You manually trigger the workflow

## Customization

### Individual Endpoints

You can customize any auto-generated endpoint file by editing the MDX files in:

- `api-reference/lists/` - List management endpoints
- `api-reference/objects/` - Object management endpoints
- `api-reference/records/` - Record management endpoints

### Using x-mint Extensions

You can add custom content to your OpenAPI spec using the `x-mint` extension:

```json
{
  "paths": {
    "/developers/v1/lists/{id}": {
      "put": {
        "summary": "Create or update a list member",
        "x-mint": {
          "content": "## Prerequisites\\n\\nThis endpoint requires admin privileges.\\n\\n<Note>Ensure the list exists before adding members.</Note>"
        }
      }
    }
  }
}
```

## File Structure

```
api-reference/
├── openapi.json                    # Your OpenAPI 3.0 specification
├── introduction.mdx                # API overview and authentication
├── lists/                          # Auto-generated list endpoints
├── objects/                        # Auto-generated object endpoints
└── records/                        # Auto-generated record endpoints

scripts/
└── update-api-docs.sh              # Automation script

.github/workflows/
└── update-api-docs.yml             # GitHub Actions workflow
```

## Troubleshooting

### OpenAPI Validation Errors

If validation fails, check your OpenAPI spec with:

```bash
mintlify openapi-check api-reference/openapi.json
```

### Missing Endpoints

If endpoints are missing after regeneration:

1. Ensure they're properly defined in your OpenAPI spec
2. Check that the operation has proper tags and summaries
3. Re-run the automation script

### Navigation Issues

If navigation doesn't update automatically:

1. Check the `navigation_suggestion.json` file generated by the script
2. Manually update the navigation section in `docs.json`

## Resources

- [Mintlify OpenAPI Setup Guide](https://mintlify.com/docs/api-playground/openapi/setup)
- [OpenAPI 3.0 Specification](https://swagger.io/specification/)
- [Mintlify x-mint Extension](https://mintlify.com/docs/api-playground/openapi/setup#x-mint)
- [DEV.to Integration Guide](https://dev.to/onwuemene/integrating-openapi-with-mintlify-204g)
